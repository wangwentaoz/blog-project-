{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n// import Cookie from 'js-cookie';\nexport default {\n  data: function data() {\n    return {\n      loading: false,\n      status: 1,\n      loginForm: {\n        username: '',\n        password: ''\n      },\n      loginRules: {\n        username: [{\n          required: true,\n          message: '请输入账号',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }]\n      },\n      regForm: {\n        username: '',\n        password: '',\n        nickname: ''\n      },\n      regRules: {\n        username: [{\n          required: true,\n          message: '请输入账号',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }],\n        nickname: [{\n          required: true,\n          message: '请输入昵称',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    signIn: function signIn() {\n      var _this = this;\n\n      this.$refs['loginForm'].validate(function (valid) {\n        if (valid) {\n          _this.loading = true;\n\n          _this.$axios.post('/api/user/login', _this.loginForm).then(function (res) {\n            var result = res.data;\n\n            if (result.code === 0) {\n              // Cookie.set('token', result.token);\n              _this.$store.commit('setToken', result.token);\n\n              _this.$store.commit('changIsSignIn', 1);\n\n              setTimeout(function () {\n                _this.loading = false;\n\n                _this.$router.push({\n                  name: 'home'\n                });\n              }, 1500);\n            }\n          });\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    },\n    signUp: function signUp() {\n      var _this2 = this;\n\n      this.$refs['regForm'].validate(function (valid) {\n        if (valid) {\n          _this2.$axios.post('/api/user/register', _this2.regForm).then(function (res) {\n            console.log(res);\n          });\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    },\n    toSignUp: function toSignUp() {\n      this.status = 2;\n    },\n    toSignIn: function toSignIn() {\n      this.status = 1;\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA;AACA;EACAA,IADA,kBACA;IACA;MACAC,cADA;MAEAC,SAFA;MAGAC;QACAC,YADA;QAEAC;MAFA,CAHA;MAOAC;QACAF;UAAAG;UAAAC;UAAAC;QAAA,EADA;QAEAJ;UAAAE;UAAAC;UAAAC;QAAA;MAFA,CAPA;MAWAC;QACAN,YADA;QAEAC,YAFA;QAGAM;MAHA,CAXA;MAgBAC;QACAR;UAAAG;UAAAC;UAAAC;QAAA,EADA;QAEAJ;UAAAE;UAAAC;UAAAC;QAAA,EAFA;QAGAE;UAAAJ;UAAAC;UAAAC;QAAA;MAHA;IAhBA;EAsBA,CAxBA;EAyBAI;IACAC,MADA,oBACA;MAAA;;MACA;QACA;UACA;;UACA;YACA;;YACA;cACA;cACA;;cACA;;cACAC;gBACA;;gBACA;kBAAAC;gBAAA;cACA,CAHA,EAGA,IAHA;YAIA;UACA,CAXA;QAYA,CAdA,MAcA;UACAC;UACA;QACA;MACA,CAnBA;IAoBA,CAtBA;IAuBAC,MAvBA,oBAuBA;MAAA;;MACA;QACA;UACA;YACAD;UACA,CAFA;QAGA,CAJA,MAIA;UACAA;UACA;QACA;MACA,CATA;IAUA,CAlCA;IAmCAE,QAnCA,sBAmCA;MACA;IACA,CArCA;IAsCAC,QAtCA,sBAsCA;MACA;IACA;EAxCA;AAzBA","names":["data","loading","status","loginForm","username","password","loginRules","required","message","trigger","regForm","nickname","regRules","methods","signIn","setTimeout","name","console","signUp","toSignUp","toSignIn"],"sourceRoot":"src/views","sources":["Login.vue"],"sourcesContent":["<template>\n  <div class=\"sign_box\">\n    <div class=\"signIn\" v-if=\"status == 1\">\n      <el-form\n        :model=\"loginForm\"\n        :rules=\"loginRules\"\n        ref=\"loginForm\"\n        label-width=\"0px\"\n        key=\"login\"\n      >\n        <el-form-item prop=\"username\">\n          <el-input\n            v-model=\"loginForm.username\"\n            placeholder=\"请输入账号\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item prop=\"password\">\n          <el-input\n            type=\"password\"\n            v-model=\"loginForm.password\"\n            placeholder=\"请输入密码\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button class=\"signBtn\" type=\"primary\" @click=\"signIn\"\n            >登录</el-button\n          >\n        </el-form-item>\n      </el-form>\n      <span class=\"signText\" @click=\"toSignUp\">注册新账号</span>\n    </div>\n    <div class=\"signUp\" v-else>\n      <el-form\n        :model=\"regForm\"\n        :rules=\"regRules\"\n        ref=\"regForm\"\n        label-width=\"0px\"\n        key=\"register\"\n      >\n        <el-form-item prop=\"username\">\n          <el-input\n            v-model=\"regForm.username\"\n            placeholder=\"请输入账号\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item prop=\"password\">\n          <el-input\n            type=\"password\"\n            v-model=\"regForm.password\"\n            placeholder=\"请输入密码\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item prop=\"nickname\">\n          <el-input\n            v-model=\"regForm.nickname\"\n            placeholder=\"请输入昵称\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button class=\"signBtn\" type=\"primary\" @click=\"signUp\"\n            >注册</el-button\n          >\n        </el-form-item>\n      </el-form>\n      <span class=\"signText\" @click=\"toSignIn\">返回登录</span>\n    </div>\n    <div v-loading.fullscreen.lock=\"loading\"></div>\n  </div>\n</template>\n\n<script>\n// import Cookie from 'js-cookie';\nexport default {\n  data() {\n    return {\n      loading: false,\n      status: 1,\n      loginForm: {\n        username: '',\n        password: '',\n      },\n      loginRules: {\n        username: [{ required: true, message: '请输入账号', trigger: 'blur' }],\n        password: [{ required: true, message: '请输入密码', trigger: 'blur' }],\n      },\n      regForm: {\n        username: '',\n        password: '',\n        nickname: '',\n      },\n      regRules: {\n        username: [{ required: true, message: '请输入账号', trigger: 'blur' }],\n        password: [{ required: true, message: '请输入密码', trigger: 'blur' }],\n        nickname: [{ required: true, message: '请输入昵称', trigger: 'blur' }],\n      },\n    };\n  },\n  methods: {\n    signIn() {\n      this.$refs['loginForm'].validate((valid) => {\n        if (valid) {\n          this.loading = true;\n          this.$axios.post('/api/user/login', this.loginForm).then((res) => {\n            let result = res.data;\n            if (result.code === 0) {\n              // Cookie.set('token', result.token);\n              this.$store.commit('setToken', result.token);\n              this.$store.commit('changIsSignIn', 1);\n              setTimeout(() => {\n                this.loading = false;\n                this.$router.push({ name: 'home' });\n              }, 1500);\n            }\n          });\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    },\n    signUp() {\n      this.$refs['regForm'].validate((valid) => {\n        if (valid) {\n          this.$axios.post('/api/user/register', this.regForm).then((res) => {\n            console.log(res);\n          });\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    },\n    toSignUp() {\n      this.status = 2;\n    },\n    toSignIn() {\n      this.status = 1;\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.sign_box {\n  width: 300px;\n  margin: 200px auto 0;\n  text-align: center;\n  .signText {\n    color: #3b78dd;\n    cursor: pointer;\n    &:hover {\n      color: #1760d7;\n    }\n  }\n}\n.signBtn {\n  width: 100%;\n  font-size: 18px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}